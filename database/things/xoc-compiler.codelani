type compiler
reference https://swtch.com/~rsc/papers/xoc-asplos2008.pdf